{% extends 'backoffice/base.html' %}
{% block content %}
  <div class="row">
    <div class="col-md-12">
      <h1>ผู้สมัครโครงการ{{ project.title }} ({{ admission_round }})</h1>
      {% if sorted_by_majors %}
        เรียงตามสาขาที่สมัคร
      {% endif %}
      <table class="table table-striped table-sm bborder-a0">
        <thead>
          <tr>
            <th></th>
            <th>รหัสประชาชน</th>
            <th>ชื่อ-นามสกุล</th>
            <th>สาขา</th>
          </tr>
        </thead>
        <tbody>
          {% for applicant in applicants %}
            {% if sorted_by_majors %}
              {% ifchanged applicant.major_number %}
                <tr class="table-info">
                  <th colspan="1000" class="text-center">
                    {% if applicant.majors %}
                      {{ applicant.majors.0.faculty.title }} -
                      {{ applicant.majors.0 }}
                    {% else %}
                      ยังไม่เลือกสาขา
                    {% endif %}
                  </th>
                </tr>
              {% endifchanged %}
            {% endif %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td><a href="{% url 'backoffice:show-applicant' applicant.national_id %}">{{ applicant.national_id }}</a></td>
              <td>{{ applicant.get_full_name }}</td>
              <td>
                {% for m in applicant.majors %}
                  {{ m.title }}{% if not forloop.last %},{% endif %}
                {% empty %}
                  -
                {% endfor %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
